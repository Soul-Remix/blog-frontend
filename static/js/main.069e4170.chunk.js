(this["webpackJsonpblog-frontend"]=this["webpackJsonpblog-frontend"]||[]).push([[0],{34:function(e,t){var s=new RegExp(/[\W]/g);e.exports={nameValidator:function(e){return e.target.value.length<3||s.test(e.target.value)?"Name should be at least 3 characters long and should not contain special characters":s.test(e.target.value)?"Name should not contain special characters":void 0},descriptionValidator:function(e){if(e.target.value.length<5)return"Comment should be at least 5 characters long"}}},56:function(e,t,s){},64:function(e,t,s){},65:function(e,t,s){},66:function(e,t,s){},67:function(e,t,s){},68:function(e,t,s){},69:function(e,t,s){},70:function(e,t,s){},71:function(e,t,s){},72:function(e,t,s){},73:function(e,t,s){},74:function(e,t,s){},75:function(e,t,s){},76:function(e,t,s){},77:function(e,t,s){"use strict";s.r(t);var c=s(2),n=s(29),a=s.n(n),r=s(10),i=s(6),o=s(14),l=(s(56),s(0)),u=function(){return Object(l.jsxs)("nav",{children:[Object(l.jsx)("h1",{className:"logo",children:Object(l.jsx)(r.b,{to:"/",children:"Blog"})}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(r.c,{exact:!0,to:"/",activeClassName:"selected",children:"Home"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(r.c,{exact:!0,to:"/about",activeClassName:"selected",children:"About"})})]})]})},j=s(11),d=s.n(j),m=s(17),b=(s(64),function(e){var t=e.title,s=e.image,c=e.comments,n=e.id;return Object(l.jsxs)(r.b,{to:"/post/".concat(n),className:"card",children:[Object(l.jsxs)("figure",{className:"card-fig",children:[Object(l.jsx)("img",{src:"https://guarded-bayou-18266.herokuapp.com/"+s,alt:t,className:"card-image"}),Object(l.jsxs)("figcaption",{className:"card-comments",children:[Object(l.jsx)("span",{children:Object(l.jsx)("svg",{version:"1.1",width:"28",height:"28",viewBox:"0 0 28 28","aria-hidden":"true",className:"symbol-comments",children:Object(l.jsx)("path",{d:"M22 12q0 2.172-1.469 4.016t-4.008 2.914-5.523 1.070q-1.344 0-2.75-0.25-1.937 1.375-4.344 2-0.562 0.141-1.344 0.25h-0.047q-0.172 0-0.32-0.125t-0.18-0.328q-0.016-0.047-0.016-0.102t0.008-0.102 0.031-0.094l0.039-0.078t0.055-0.086 0.063-0.078 0.070-0.078 0.063-0.070q0.078-0.094 0.359-0.391t0.406-0.461 0.352-0.453 0.391-0.602 0.32-0.688q-1.937-1.125-3.047-2.766t-1.109-3.5q0-2.172 1.469-4.016t4.008-2.914 5.523-1.070 5.523 1.070 4.008 2.914 1.469 4.016zM28 16q0 1.875-1.109 3.508t-3.047 2.758q0.156 0.375 0.32 0.688t0.391 0.602 0.352 0.453 0.406 0.461 0.359 0.391q0.016 0.016 0.063 0.070t0.070 0.078 0.063 0.078 0.055 0.086l0.039 0.078t0.031 0.094 0.008 0.102-0.016 0.102q-0.047 0.219-0.203 0.344t-0.344 0.109q-0.781-0.109-1.344-0.25-2.406-0.625-4.344-2-1.406 0.25-2.75 0.25-4.234 0-7.375-2.063 0.906 0.063 1.375 0.063 2.516 0 4.828-0.703t4.125-2.016q1.953-1.437 3-3.313t1.047-3.969q0-1.203-0.359-2.375 2.016 1.109 3.187 2.781t1.172 3.594z"})})}),c.length]})]}),Object(l.jsx)("p",{className:"card-title",children:t})]})}),h=(s(65),function(e){return Object(l.jsxs)("div",{className:"loader",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})}),x=(s(66),function(e){var t=e.message,s=Object(i.e)();return Object(l.jsxs)("div",{className:"error-container",children:[Object(l.jsx)("div",{className:"overlay"}),Object(l.jsxs)("div",{className:"error-card",children:[Object(l.jsx)("h2",{children:"Error"}),Object(l.jsx)("p",{children:t}),Object(l.jsx)("button",{className:"error-button",onClick:function(){s.push("/")},children:"Close"})]})]})}),p=(s(67),function(){var e=Object(m.a)(d.a.mark((function e(t){var s,c,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.pageParam,c=void 0===s?1:s,e.next=3,fetch("https://guarded-bayou-18266.herokuapp.com/api/v1/posts?page=".concat(c));case 3:return n=e.sent,e.next=6,n.json();case 6:if(a=e.sent,200!==n.status){e.next=11;break}return e.abrupt("return",a);case 11:throw new x(a.message);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O=function(){var e=Object(o.useInfiniteQuery)("posts",p,{getNextPageParam:function(e){return!!e.hasNextPage&&e.nextPage}}),t=e.data,s=e.error,c=e.isLoading,n=e.isError,a=e.fetchNextPage,r=e.hasNextPage;if(c)return Object(l.jsx)("div",{className:"center-container",children:Object(l.jsx)(h,{})});if(n)return Object(l.jsx)(x,{message:s.message});if(t){var i=t.pages.map((function(e){return e.posts.map((function(e){return Object(l.jsx)(b,{title:e.title,image:e.image,comments:e.comments,id:e._id},e._id)}))}));return Object(l.jsxs)("div",{className:"container",children:[i,r&&Object(l.jsx)("button",{className:"more-button",onClick:function(){return a()},children:"Load More"})]})}},f=s(20),v=(s(68),function(){return Object(l.jsxs)("div",{className:"social",children:[Object(l.jsx)("a",{href:"#comments",children:Object(l.jsx)("svg",{version:"1.1",width:"28",height:"28",viewBox:"0 0 28 28","aria-hidden":"true",className:"symbol-social symbol-social-comments",children:Object(l.jsx)("path",{d:"M22 12q0 2.172-1.469 4.016t-4.008 2.914-5.523 1.070q-1.344 0-2.75-0.25-1.937 1.375-4.344 2-0.562 0.141-1.344 0.25h-0.047q-0.172 0-0.32-0.125t-0.18-0.328q-0.016-0.047-0.016-0.102t0.008-0.102 0.031-0.094l0.039-0.078t0.055-0.086 0.063-0.078 0.070-0.078 0.063-0.070q0.078-0.094 0.359-0.391t0.406-0.461 0.352-0.453 0.391-0.602 0.32-0.688q-1.937-1.125-3.047-2.766t-1.109-3.5q0-2.172 1.469-4.016t4.008-2.914 5.523-1.070 5.523 1.070 4.008 2.914 1.469 4.016zM28 16q0 1.875-1.109 3.508t-3.047 2.758q0.156 0.375 0.32 0.688t0.391 0.602 0.352 0.453 0.406 0.461 0.359 0.391q0.016 0.016 0.063 0.070t0.070 0.078 0.063 0.078 0.055 0.086l0.039 0.078t0.031 0.094 0.008 0.102-0.016 0.102q-0.047 0.219-0.203 0.344t-0.344 0.109q-0.781-0.109-1.344-0.25-2.406-0.625-4.344-2-1.406 0.25-2.75 0.25-4.234 0-7.375-2.063 0.906 0.063 1.375 0.063 2.516 0 4.828-0.703t4.125-2.016q1.953-1.437 3-3.313t1.047-3.969q0-1.203-0.359-2.375 2.016 1.109 3.187 2.781t1.172 3.594z"})})}),Object(l.jsx)("a",{href:"www.facebook.com",children:Object(l.jsx)("svg",{version:"1.1",width:"16",height:"28",viewBox:"0 0 16 28","aria-hidden":"true",className:"symbol-social symbol-social-facebook",children:Object(l.jsx)("path",{d:"M14.984 0.187v4.125h-2.453q-1.344 0-1.813 0.562t-0.469 1.687v2.953h4.578l-0.609 4.625h-3.969v11.859h-4.781v-11.859h-3.984v-4.625h3.984v-3.406q0-2.906 1.625-4.508t4.328-1.602q2.297 0 3.563 0.187z"})})}),Object(l.jsx)("a",{href:"www.twitter.com",children:Object(l.jsx)("svg",{version:"1.1",width:"26",height:"28",viewBox:"0 0 26 28","aria-hidden":"true",className:"symbol-social symbol-social-twitter",children:Object(l.jsx)("path",{d:"M25.312 6.375q-1.047 1.531-2.531 2.609 0.016 0.219 0.016 0.656 0 2.031-0.594 4.055t-1.805 3.883-2.883 3.289-4.031 2.281-5.047 0.852q-4.234 0-7.75-2.266 0.547 0.063 1.219 0.063 3.516 0 6.266-2.156-1.641-0.031-2.938-1.008t-1.781-2.492q0.516 0.078 0.953 0.078 0.672 0 1.328-0.172-1.75-0.359-2.898-1.742t-1.148-3.211v-0.063q1.062 0.594 2.281 0.641-1.031-0.688-1.641-1.797t-0.609-2.406q0-1.375 0.688-2.547 1.891 2.328 4.602 3.727t5.805 1.555q-0.125-0.594-0.125-1.156 0-2.094 1.477-3.57t3.57-1.477q2.188 0 3.687 1.594 1.703-0.328 3.203-1.219-0.578 1.797-2.219 2.781 1.453-0.156 2.906-0.781z"})})})]})}),g=(s(69),function(e){var t=e.data,s=t.title,c=t.description,n=t.image,a=t.author,r=t.createdAt;return Object(l.jsxs)("div",{className:"post-container",children:[Object(l.jsxs)("figure",{className:"post-fig",children:[Object(l.jsx)("img",{src:"https://guarded-bayou-18266.herokuapp.com/"+n,alt:s,className:"post-image"}),Object(l.jsx)("figcaption",{className:"post-header",children:s})]}),Object(l.jsxs)("p",{className:"post-by",children:["By ",Object(l.jsx)("span",{className:"post-author",children:a.userName})," on ",r]}),Object(l.jsx)("hr",{}),Object(l.jsxs)("div",{className:"post-grid",children:[Object(l.jsx)(v,{}),Object(l.jsx)("article",{className:"post-body",dangerouslySetInnerHTML:{__html:c}})]})]})}),N=(s(70),function(e){var t=e.userName,s=e.description,c=e.onInputChange,n=e.userNameError,a=e.descriptionError,r=e.submitComment,i=e.commentError;return Object(l.jsxs)("form",{onSubmit:function(e){return r(e,t,s)},children:[Object(l.jsxs)("div",{className:"input",children:[Object(l.jsxs)("label",{htmlFor:"userName",children:["Name:",Object(l.jsx)("span",{className:"required",children:"*"})]}),Object(l.jsx)("input",{type:"text",id:"userName",name:"userName",placeholder:"Name",required:!0,value:t,onChange:c,className:n?"invalid":""}),n&&Object(l.jsx)("p",{className:"required",children:n})]}),Object(l.jsxs)("div",{className:"input",children:[Object(l.jsxs)("label",{htmlFor:"description",children:["Comment:",Object(l.jsx)("span",{className:"required",children:"*"})]}),Object(l.jsx)("textarea",{id:"description",name:"description",placeholder:"Comment",required:!0,value:s,onChange:c,className:a?"invalid":""}),a&&Object(l.jsx)("p",{className:"required",children:a})]}),Object(l.jsx)("button",{type:"submit",className:a||n?"submit-btn disabled-btn":"submit-btn",disabled:!(!a&&!n),children:"Submit comment"}),i&&Object(l.jsx)("p",{className:"required ",children:i})]})}),q=(s(71),function(e){var t=e.length,s=e.showComment;return Object(l.jsxs)("p",{className:"no-comment",children:[0===t?"No comment yet":t+" Comments",Object(l.jsxs)("button",{className:"add-comment-btn",onClick:s,children:[Object(l.jsx)("svg",{className:"symbol-add",viewBox:"0 0 512 512",children:Object(l.jsx)("path",{d:"M493.255 56.236l-37.49-37.49c-24.993-24.993-65.515-24.994-90.51 0L12.838 371.162.151 485.346c-1.698 15.286 11.22 28.203 26.504 26.504l114.184-12.687 352.417-352.417c24.992-24.994 24.992-65.517-.001-90.51zm-95.196 140.45L174 420.745V386h-48v-48H91.255l224.059-224.059 82.745 82.745zM126.147 468.598l-58.995 6.555-30.305-30.305 6.555-58.995L63.255 366H98v48h48v34.745l-19.853 19.853zm344.48-344.48l-49.941 49.941-82.745-82.745 49.941-49.941c12.505-12.505 32.748-12.507 45.255 0l37.49 37.49c12.506 12.506 12.507 32.747 0 45.255z"})}),"Add a comment"]})]})}),w=(s(72),function(e){return e.comments.map((function(e){return Object(l.jsxs)("div",{className:"comment-card",children:[Object(l.jsxs)("div",{className:"comment-flex",children:[Object(l.jsx)("p",{className:"comment-user",children:e.userName}),Object(l.jsx)("small",{className:"comment-date",children:e.createdAt})]}),Object(l.jsx)("p",{className:"comment-body",children:e.description})]},e._id)}))}),y=(s(73),function(e){var t=e.posts;return Object(l.jsxs)("section",{className:"more-container",children:[Object(l.jsx)("h3",{className:"more-header",children:"More Posts:"}),Object(l.jsx)("div",{className:"more-card-container",children:t.slice(3,5).map((function(e){return Object(l.jsx)(b,{title:e.title,image:e.image,comments:e.comments,id:e._id},e._id)}))})]})}),k=s(34),C=s.n(k),E=function(){var e=Object(m.a)(d.a.mark((function e(t){var s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://guarded-bayou-18266.herokuapp.com/api/v1/post/".concat(t));case 2:return s=e.sent,e.next=5,s.json();case 5:if(c=e.sent,200!==s.status){e.next=10;break}return e.abrupt("return",c);case 10:throw new Error(c.message);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=E,P=function(){var e=Object(m.a)(d.a.mark((function e(){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://guarded-bayou-18266.herokuapp.com/api/v1/posts");case 2:if(t=e.sent,s=t.json(),200!=t.status){e.next=8;break}return e.abrupt("return",s);case 8:throw new Error(t.statusText);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=P,S=(s(74),function(){var e=Object(i.f)().id,t=Object(c.useState)(""),s=Object(f.a)(t,2),n=s[0],a=s[1],r=Object(c.useState)(""),u=Object(f.a)(r,2),j=u[0],b=u[1],p=Object(c.useState)(""),O=Object(f.a)(p,2),v=O[0],k=O[1],E=Object(c.useState)(""),P=Object(f.a)(E,2),S=P[0],B=P[1],T=Object(c.useState)(!1),_=Object(f.a)(T,2),L=_[0],F=_[1],A=Object(c.useState)(""),I=Object(f.a)(A,2),Q=I[0],V=I[1],H=Object(o.useQuery)("recent",z,{refetchOnWindowFocus:!1,staleTime:1e4}).data,W=Object(o.useQuery)("".concat(e),(function(){return M(e)}),{refetchOnWindowFocus:!1,staleTime:1e4}),J=(W.isLoading,W.isError),R=W.data,D=W.error,U=function(){var t=Object(m.a)(d.a.mark((function t(s,c,n){var r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),t.next=3,fetch("https://guarded-bayou-18266.herokuapp.com/api/v1/post/".concat(e,"/comment"),{method:"PUT",body:JSON.stringify({userName:c,description:n}),headers:{"content-type":"application/json"}});case 3:return r=t.sent,t.next=6,r.json();case 6:if(i=t.sent,200!==r.status){t.next=16;break}return R.comments.push(i.comment),V(""),a(""),b(""),F(!1),t.abrupt("return");case 16:if(500!==r.status){t.next=20;break}return V(r.statusText),console.log(Q),t.abrupt("return");case 20:case"end":return t.stop()}}),t)})));return function(e,s,c){return t.apply(this,arguments)}}();return J?Object(l.jsx)(x,{message:D.message}):R&&H?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(g,{data:R}),Object(l.jsx)(y,{posts:H.posts}),Object(l.jsxs)("div",{className:"comments-container",id:"comments",children:[Object(l.jsx)(q,{length:R.comments.length,showComment:function(){F((function(e){return!e}))}}),L&&Object(l.jsx)(N,{userName:n,userNameError:v,description:j,descriptionError:S,onInputChange:function(e){if("userName"===e.target.name){a(e.target.value);var t=C.a.nameValidator(e);t&&k(t),t||k("")}else if("description"===e.target.name){b(e.target.value);var s=C.a.descriptionValidator(e);s&&B(s),s||B("")}},submitComment:U,commentError:Q}),Object(l.jsx)(w,{comments:R.comments})]})]}):Object(l.jsx)("div",{className:"center-container",children:Object(l.jsx)(h,{})})}),B=(s(75),function(){var e=Object(o.useQuery)("recent",z,{refetchOnWindowFocus:!1,staleTime:1e7}),t=e.data,s=e.isLoading,c=e.isError,n=e.error;return s?Object(l.jsx)("div",{className:"center-container",children:Object(l.jsx)(h,{})}):c?Object(l.jsx)(x,{message:n.message}):t?Object(l.jsxs)("div",{className:"about-container",children:[Object(l.jsxs)("section",{className:"about",children:[Object(l.jsx)("p",{className:"about-header",children:"About"}),Object(l.jsx)("hr",{className:"about-hr"}),Object(l.jsx)("p",{className:"about-body",children:"The Movie Blog is (are you ready for this?) a blog about movies."}),Object(l.jsx)("p",{className:"about-body",children:"This is not a news site per se (although you\u2019ll get a lot of news here), but rather a place to give thoughts and opinions on movies and movie news. A pundit site if you will for the Movie Industry."})]}),Object(l.jsxs)("section",{className:"recent",children:[Object(l.jsx)("h2",{children:"Recent Posts"}),t.posts.slice(0,4).map((function(e){return Object(l.jsx)(r.b,{className:"recent-link",to:"/post/".concat(e._id),children:e.title},e._id)}))]})]}):void 0}),T=new o.QueryClient;var _=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(u,{}),Object(l.jsxs)(o.QueryClientProvider,{client:T,children:[Object(l.jsx)(i.a,{exact:!0,path:"/",children:Object(l.jsx)(O,{})}),Object(l.jsx)(i.a,{path:"/post/:id",children:Object(l.jsx)(S,{})}),Object(l.jsx)(i.a,{exact:!0,path:"/about",children:Object(l.jsx)(B,{})})]})]})};s(76);a.a.render(Object(l.jsx)(r.a,{children:Object(l.jsx)(_,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.069e4170.chunk.js.map